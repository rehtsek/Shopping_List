<!DOCTYPE html>
<html>
<head>
  <!-- jquery library-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <style>
  /*css style for font*/
  li {font-sze:2em}
  /*Create a class to notify when item has been clicked as bought or for deletion*/
  .bought {color:#d3d3d3}
  /* creat class called toBuy for unbought items*/
  .toBuy {color:black}
  </style>
</head>
<body>
  <!--basic html shopping List-->
<ul id="shoppingList"></ul>
<!--create two simple input fields and an Add button-->
New Item <input type="text" id="item"/> <br/>
Quantity <input type="text" id="quantity"/> <br/>
<input type="button" name="addBtn" onclick="addItem()"/> <br/>
<hr/>
<input type="button" onclick="getListItems('shoppingEsther1234')"/>

<!--create function for bought items color to change upon clicked event-->
<script>
<!--to make javascript start-->
$( document ).ready(function() {

    if (localStorage.sList!=null) getListFromStorage();
});

//new items added will now also be changed upon click
$(document).on('click','li',function()
{
  //check status of item to know if already bought or not
  if ($(this).hasClass("bought"))
  {
    $(this).removeClass("bought");
    $(this).addClass("toBuy");
  }
  else
  {
    $(this).removeClass("toBuy");
    $(this).addClass("bought");
  }
});
</script>

<!-- Add new item to list by creating another other and appending it to the already created list-->
<script>
function addItem()
{
  //localStorage.removeItem("shoppingEsther123");
  addEntry("shoppingEsther1234");
}
</script>

<!-- local Storage, turn list of things in JSON(Stringify) -->
<script>
function collectData()
{
  var jList = [];
  $("#shoppingList").children("li").each(function()
  {
    var s = $(this).text(); // this will give us item + quantity
    var boughtOrNot = $(this).hasClass("bought");
    var thisItem = {};
    thisItem.itemQuantity = s;
    thisItem.bought = boughtOrNot;
    jList.push(thisItem);
});
return JSON.stringify(jList);
}
</script>

<!-- function to display list items-->
<script>
function getListFromStorage()
{
var stringList = localStorage.sList;
var jsonList = JSON.parse(stringList);
$.each(jsonList, function(i, groceryItem) {
var li;
if (groceryItem.bought)
{
li = "<li class='bought'>" + groceryItem.itemQuantity +  "</li>";
}
else
{
li =  "<li>" + groceryItem.itemQuantity +  "</li>";
}

$("#shoppingList").append(li);
});
}

function addEntry(listName) {
    // Parse any JSON previously stored in allEntries
    var existingEntries = JSON.parse(localStorage.getItem(listName));
    if(existingEntries == null) existingEntries = [];
    var entryItem = document.getElementById("item").value;
    var entryQty = document.getElementById("quantity").value;
    var entry = {
        "item": entryItem,
        "quantity": entryQty
    };
    //localStorage.setItem("entry", JSON.stringify(entry));
    // Save allEntries back to local storage
    existingEntries.push(entry);
    localStorage.setItem(listName, JSON.stringify(existingEntries));
     console.log(JSON.stringify(existingEntries));
};

function getListItems(listName){
var shoppingListItems = localStorage.getItem(listName);
var jsonList = JSON.parse(shoppingListItems);
 console.log(localStorage.getItem(listName));
$.each(jsonList, function(i, groceryItem) {
var li;
li =  "<li>" + item.quantity + "</li>";
$("#shoppingList").append(li);
});
}
</script>

</body>
</html>
